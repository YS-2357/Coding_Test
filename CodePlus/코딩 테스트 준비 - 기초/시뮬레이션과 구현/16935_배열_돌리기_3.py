# -----------------------------------------------------
# âœ… ë¬¸ì œ ì„¤ëª…:
# - NÃ—M í¬ê¸°ì˜ ë°°ì—´ì´ ì£¼ì–´ì§€ê³ , íŠ¹ì • ì—°ì‚°ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.
# - 6ê°œì˜ ì—°ì‚° (ìƒí•˜ë°˜ì „, ì¢Œìš°ë°˜ì „, ì‹œê³„90ë„ íšŒì „, ë°˜ì‹œê³„90ë„ íšŒì „, 
#   4ë¶„ë©´ ì‹œê³„ë°©í–¥ ì´ë™, 4ë¶„ë©´ ë°˜ì‹œê³„ë°©í–¥ ì´ë™)ì„ êµ¬í˜„í•´ì•¼ í•œë‹¤.
# - Rê°œì˜ ì—°ì‚°ì´ ì£¼ì–´ì¡Œì„ ë•Œ, ìµœì¢… ë°°ì—´ ìƒíƒœë¥¼ ì¶œë ¥í•´ì•¼ í•œë‹¤.
#
# âœ… ì…ë ¥ í˜•ì‹:
# - ì²« ë²ˆì§¸ ì¤„: `N M R` (2 â‰¤ N, M â‰¤ 100, 1 â‰¤ R â‰¤ 1000)
# - ì´í›„ Nê°œì˜ ì¤„: ë°°ì—´ ì›ì†Œ (0 â‰¤ ì›ì†Œ â‰¤ 100)
# - ë§ˆì§€ë§‰ ì¤„: `R`ê°œì˜ ì—°ì‚° (1 â‰¤ ì—°ì‚° â‰¤ 6)
#
# âœ… ì¶œë ¥ í˜•ì‹:
# - ì—°ì‚°ì„ ìˆ˜í–‰í•œ í›„ ìµœì¢… ë°°ì—´ì„ ì¶œë ¥
#
# âœ… ì…ì¶œë ¥ ì˜ˆì œ:
# ğŸ”¹ ì˜ˆì œ ì…ë ¥ 1:
#   3 3 1
#   1 2 3
#   4 5 6
#   7 8 9
#   3
# ğŸ”¹ ì˜ˆì œ ì¶œë ¥ 1:
#   7 4 1
#   8 5 2
#   9 6 3
# -----------------------------------------------------

import sys

# âœ… 90ë„ íšŒì „ (ì‹œê³„ ë°©í–¥)
# - ê¸°ì¡´ í–‰ë ¬ì„ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „ì‹œí‚¤ëŠ” í•¨ìˆ˜
# - ìƒˆë¡œìš´ í–‰ë ¬ì„ ë§Œë“¤ì–´ (j, i) ìœ„ì¹˜ë¡œ ê°’ì„ ì´ë™
# - Nê³¼ Mì˜ í¬ê¸°ê°€ ì„œë¡œ ë°”ë€Œë¯€ë¡œ, íšŒì „ í›„ í¬ê¸°ë¥¼ í•¨ê»˜ ë°˜í™˜
def rotate_right(matrix, n, m):
    temp = [[0] * n for _ in range(m)]
    for i in range(m):
        for j in range(n):
            temp[i][j] = matrix[n - 1 - j][i]  # ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 90ë„ íšŒì „
    return temp, m, n  # íšŒì „ í›„ í¬ê¸° ë³€ê²½

# âœ… 90ë„ íšŒì „ (ë°˜ì‹œê³„ ë°©í–¥)
# - ê¸°ì¡´ í–‰ë ¬ì„ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „
# - (j, i) ìœ„ì¹˜ë¡œ ê°’ì„ ì´ë™
# - ë§ˆì°¬ê°€ì§€ë¡œ Nê³¼ M í¬ê¸°ê°€ ë³€ê²½ë¨
def rotate_left(matrix, n, m):
    temp = [[0] * n for _ in range(m)]
    for i in range(m):
        for j in range(n):
            temp[i][j] = matrix[j][m - 1 - i]  # ë°˜ì‹œê³„ ë°©í–¥ 90ë„ íšŒì „
    return temp, m, n  # íšŒì „ í›„ í¬ê¸° ë³€ê²½

# âœ… 4ë¶„ë©´ ì‹œê³„ ë°©í–¥ ì´ë™
# - 1ë²ˆ -> 2ë²ˆ, 2ë²ˆ -> 3ë²ˆ, 3ë²ˆ -> 4ë²ˆ, 4ë²ˆ -> 1ë²ˆ ì´ë™
# - ìƒˆë¡œìš´ í–‰ë ¬ì„ ë§Œë“¤ì–´ ê¸°ì¡´ ê°’ì„ ì´ë™ì‹œí‚´
def move_clockwise(matrix, n, m):
    temp = [[0] * m for _ in range(n)]
    for i in range(n // 2):
        for j in range(m // 2):
            temp[i][j + m // 2] = matrix[i][j]  # 1 -> 2
    for i in range(n // 2):
        for j in range(m // 2, m):
            temp[i + n // 2][j] = matrix[i][j]  # 2 -> 3
    for i in range(n // 2, n):
        for j in range(m // 2, m):
            temp[i][j - m // 2] = matrix[i][j]  # 3 -> 4
    for i in range(n // 2, n):
        for j in range(m // 2):
            temp[i - n // 2][j] = matrix[i][j]  # 4 -> 1
    return temp

# âœ… 4ë¶„ë©´ ë°˜ì‹œê³„ ë°©í–¥ ì´ë™
# - 1ë²ˆ -> 4ë²ˆ, 4ë²ˆ -> 3ë²ˆ, 3ë²ˆ -> 2ë²ˆ, 2ë²ˆ -> 1ë²ˆ ì´ë™
# - ìƒˆë¡œìš´ í–‰ë ¬ì„ ë§Œë“¤ì–´ ê¸°ì¡´ ê°’ì„ ì´ë™ì‹œí‚´
def move_counter_clockwise(matrix, n, m):
    temp = [[0] * m for _ in range(n)]
    for i in range(n // 2):
        for j in range(m // 2):
            temp[i + n // 2][j] = matrix[i][j]  # 1 -> 4
    for i in range(n // 2, n):
        for j in range(m // 2):
            temp[i][j + m // 2] = matrix[i][j]  # 4 -> 3
    for i in range(n // 2, n):
        for j in range(m // 2, m):
            temp[i - n // 2][j] = matrix[i][j]  # 3 -> 2
    for i in range(n // 2):
        for j in range(m // 2, m):
            temp[i][j - m // 2] = matrix[i][j]  # 2 -> 1
    return temp

# âœ… ì…ë ¥ ì²˜ë¦¬
n, m, r = map(int, sys.stdin.readline().split())
board = [list(map(int, sys.stdin.readline().split())) for _ in range(n)]
operations = list(map(int, sys.stdin.readline().split()))

# âœ… ì—°ì‚° ìˆ˜í–‰
for op in operations:
    if op == 1:
        board.reverse()  # ìƒí•˜ë°˜ì „
    elif op == 2:
        board = [row[::-1] for row in board]  # ì¢Œìš°ë°˜ì „
    elif op == 3:
        board, n, m = rotate_right(board, n, m)  # ì‹œê³„ë°©í–¥ íšŒì „
    elif op == 4:
        board, n, m = rotate_left(board, n, m)  # ë°˜ì‹œê³„ë°©í–¥ íšŒì „
    elif op == 5:
        board = move_clockwise(board, n, m)  # 4ë¶„ë©´ ì‹œê³„ë°©í–¥ ì´ë™
    elif op == 6:
        board = move_counter_clockwise(board, n, m)  # 4ë¶„ë©´ ë°˜ì‹œê³„ë°©í–¥ ì´ë™

# âœ… ìµœì¢… ê²°ê³¼ ì¶œë ¥
for row in board:
    print(*row)

# ----------------------------------------------------------
# âœ… 2ë‹¨ê³„ì—ì„œ ë°œìƒí•œ ì˜¤ë¥˜ ì •ë¦¬ ë° ìˆ˜ì •:
# 1ï¸âƒ£ **ë°°ì—´ ë°˜ì „ ì‹œ ì¸ë±ìŠ¤ ì˜¤ë¥˜**
# ê¸°ì¡´ ì½”ë“œ: `matrix.reverse()`ê°€ ìƒí•˜ë°˜ì „ë§Œ ìˆ˜í–‰í•˜ê³  ì¢Œìš°ë°˜ì „ì€ ë”°ë¡œ ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ.
# âœ… í•´ê²°: `board.reverse()`ì™€ `board = [row[::-1] for row in board]`ì„ ë¶„ë¦¬í•˜ì—¬ êµ¬í˜„.

# 2ï¸âƒ£ **ì‹œê³„ ë° ë°˜ì‹œê³„ íšŒì „ ì‹œ N, M ê°’ ìœ ì§€ ì˜¤ë¥˜**
# ê¸°ì¡´ ì½”ë“œ: `rotate_right()`ì™€ `rotate_left()`ì—ì„œ N, M ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠìŒ.
# âœ… í•´ê²°: `return temp, m, n`ì„ ì¶”ê°€í•˜ì—¬ íšŒì „ í›„ í¬ê¸° ë³€ê²½.

# 3ï¸âƒ£ **4ë¶„ë©´ ì´ë™ ì—°ì‚°ì—ì„œ ì˜ëª»ëœ ìœ„ì¹˜ ì§€ì •**
# ê¸°ì¡´ ì½”ë“œì—ì„œ 4ë¶„ë©´ ì´ë™ì´ ì˜ëª» ì„¤ì •ë¨.
# âœ… í•´ê²°: `move_clockwise()`ì™€ `move_counter_clockwise()`ë¥¼ ìˆ˜ì •í•˜ì—¬ ì˜¬ë°”ë¥¸ ë°©í–¥ ì´ë™.

# âœ… ìµœì¢… ì •ë¦¬:
# - `sys.stdin.readline()`ì„ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥¸ ì…ë ¥ ì²˜ë¦¬.
# - 6ê°€ì§€ ì—°ì‚°ì„ ê°œë³„ í•¨ìˆ˜ë¡œ ì •ì˜í•˜ì—¬ ì½”ë“œ ëª¨ë“ˆí™”.
# - N, Mì´ ë³€ê²½ë˜ëŠ” íšŒì „ ì—°ì‚°ì„ ì²˜ë¦¬í•œ í›„ í¬ê¸° ì¡°ì •.
# ----------------------------------------------------------
