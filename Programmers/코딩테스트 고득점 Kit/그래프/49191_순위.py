# 49191_ìˆœìœ„.py
# -----------------------------------------------------
# âœ… ë¬¸ì œ ì„¤ëª…:
# - Aê°€ Bë¥¼ ì´ê¸°ë©´ Aì˜ ìˆœìœ„ëŠ” Bë³´ë‹¤ ì•ì„ ë‹¤.
# - ì—¬ëŸ¬ ê²½ê¸° ê²°ê³¼ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê° ì„ ìˆ˜ì˜ ì •í™•í•œ ìˆœìœ„ë¥¼ ì•Œ ìˆ˜ ìˆëŠ”ì§€ íŒë‹¨í•œë‹¤.
# - ì •í™•í•œ ìˆœìœ„ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” ì„ ìˆ˜ì˜ ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•œë‹¤.

# âœ… ì…ë ¥ í˜•ì‹:
# - n: ì„ ìˆ˜ì˜ ìˆ˜ (1 â‰¤ n â‰¤ 100)
# - results: ê²½ê¸° ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ (Aê°€ Bë¥¼ ì´ê²¼ë‹¤ë©´ [A, B])

# âœ… ì¶œë ¥ í˜•ì‹:
# - ì •í™•í•œ ìˆœìœ„ë¥¼ ì•Œ ìˆ˜ ìˆëŠ” ì„ ìˆ˜ì˜ ìˆ˜ (int)

# âœ… ì…ì¶œë ¥ ì˜ˆì œ:
# ğŸ”¹ ì…ë ¥:
#   n = 5
#   results = [[4,3],[4,2],[3,2],[1,2],[2,5]]
# ğŸ”¹ ì¶œë ¥:
#   2
# -----------------------------------------------------

from collections import defaultdict

def solution(n, results):
    answer = 0
    # âœ… ê° ì„ ìˆ˜ì˜ ì´ê¸´ ì„ ìˆ˜ ëª©ë¡ê³¼ ì§„ ì„ ìˆ˜ ëª©ë¡ì„ ì €ì¥
    win_graph = defaultdict(set)   # Aê°€ Bë¥¼ ì´ê¹€ â†’ win_graph[A].add(B)
    lose_graph = defaultdict(set)  # Aê°€ Bë¥¼ ì´ê¹€ â†’ lose_graph[B].add(A)

    for winner, loser in results:
        win_graph[winner].add(loser)
        lose_graph[loser].add(winner)

    # âœ… DFSë¡œ ì „íŒŒ ê´€ê³„ ì¶”ì 
    def dfs(graph, start, visited):
        for next in graph[start]:
            if next not in visited:
                visited.add(next)
                dfs(graph, next, visited)

    # âœ… ê° ì„ ìˆ˜ì— ëŒ€í•´ ì •í™•í•œ ìˆœìœ„ë¥¼ ì•Œ ìˆ˜ ìˆëŠ”ì§€ íŒë‹¨
    for i in range(1, n+1):
        win_visited = set()   # iê°€ ì´ê¸´ ëª¨ë“  ì„ ìˆ˜ë“¤
        lose_visited = set()  # iê°€ ì§„ ëª¨ë“  ì„ ìˆ˜ë“¤

        dfs(win_graph, i, win_visited)
        dfs(lose_graph, i, lose_visited)

        # âœ… ì „íŒŒëœ win/loseì˜ ìˆ˜ê°€ n-1ì´ë©´ ìˆœìœ„ë¥¼ ì•Œ ìˆ˜ ìˆìŒ
        if len(win_visited) + len(lose_visited) == n - 1:
            answer += 1

    return answer

# -----------------------------------------------------
# âœ… ë‚´ê°€ ì´ì „ì— í‹€ë ¸ë˜ ì  ì •ë¦¬:
# 1. ì´ê¸´ ì„ ìˆ˜ì™€ ì§„ ì„ ìˆ˜ë¥¼ í•œ ë°©í–¥ìœ¼ë¡œë§Œ ì €ì¥í•¨ â†’ ì „íŒŒ ê´€ê³„ íŒŒì•… ë¶ˆê°€
# 2. ìˆœìœ„ í™•ì • ì¡°ê±´ì„ ì˜ëª» ì´í•´í–ˆìŒ â†’ "ì—°ê²°ëœ ì„ ìˆ˜ ìˆ˜ = n - 1"ë¡œ íŒë‹¨í•´ì•¼ í•¨
# 3. DFSë¡œ ì „íŒŒ ê´€ê³„ë¥¼ í™•ì¥í•˜ì§€ ì•Šì•„ ì§ì ‘ ì—°ê²°ëœ ê´€ê³„ë§Œ ê³ ë ¤í•¨

# âœ… ChatGPTê°€ ì œê³µí•œ íŒíŠ¸ ëª©ë¡:
# - defaultdict(set)ì„ í™œìš©í•´ win/lose ê·¸ë˜í”„ êµ¬ì¶•
# - ê° ì„ ìˆ˜ì— ëŒ€í•´ DFS ìˆ˜í–‰í•˜ì—¬ ëª¨ë“  ì „íŒŒ ê°€ëŠ¥í•œ ìŠ¹/íŒ¨ ê´€ê³„ ì¶”ì 
# - ì •í™•í•œ ìˆœìœ„ëŠ” "ì´ê¸´ ì„ ìˆ˜ ìˆ˜ + ì§„ ì„ ìˆ˜ ìˆ˜ == n - 1" ì¡°ê±´ìœ¼ë¡œ í™•ì¸
# - DFS í…œí”Œë¦¿: `for next in graph[start]` â†’ ì¬ê·€ í˜¸ì¶œë¡œ ì „íŒŒ
# -----------------------------------------------------
