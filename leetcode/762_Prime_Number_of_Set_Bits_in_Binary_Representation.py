# 762_Prime_Number_of_Set_Bits_in_Binary_Representation.py
# -----------------------------------------------------
# âœ… ì œëª©: LeetCode 762. Prime Number of Set Bits in Binary Representation
# ğŸ·ï¸ ìœ í˜•: Bit Manipulation, Counting, Primality Test
#
# âœ… ë¬¸ì œ ì„¤ëª…(ìš”ì•½):
#   - ì •ìˆ˜ leftë¶€í„° rightê¹Œì§€ ê° ìˆ˜ì˜ ì´ì§„ìˆ˜ í‘œí˜„ì—ì„œ 1ì˜ ê°œìˆ˜(popcount)ë¥¼ êµ¬í•œë‹¤.
#   - ê·¸ popcountê°€ ì†Œìˆ˜(prime)ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.
#
# âœ… ì…ë ¥ í˜•ì‹(ìš”ì§€):
#   - left: int (êµ¬ê°„ ì‹œì‘)
#   - right: int (êµ¬ê°„ ë)
#
# âœ… ê·œì¹™ ìš”ì•½:
#   - left <= i <= right ë²”ìœ„ì˜ ëª¨ë“  ì •ìˆ˜ iì— ëŒ€í•´ popcount(i)ë¥¼ ê³„ì‚°í•œë‹¤.
#   - popcount ê°’ì´ ì†Œìˆ˜ì´ë©´ ì¹´ìš´íŠ¸í•œë‹¤.
#   - ì†Œìˆ˜ íŒì •ì€ n <= 1ì´ë©´ False, ê·¸ ì™¸ 2..sqrt(n)ë¡œ ë‚˜ëˆ ë–¨ì–´ì§€ëŠ”ì§€ ê²€ì‚¬í•œë‹¤.
#
# ğŸ§  í•µì‹¬ ë¶ˆë³€ì‹(Invariant):
#   - ë°˜ë³µë¬¸ì—ì„œ countëŠ” í˜„ì¬ê¹Œì§€ ì²˜ë¦¬í•œ ìˆ˜ë“¤ ì¤‘ "popcountê°€ ì†Œìˆ˜"ì¸ ìˆ˜ì˜ ê°œìˆ˜ë¥¼ í•­ìƒ ìœ ì§€í•œë‹¤.
#   - isPrime(n)ì€ nì´ ì†Œìˆ˜ì¼ ë•Œë§Œ Trueë¥¼ ë°˜í™˜í•œë‹¤(í•©ì„±ìˆ˜ëŠ” ìµœì†Œ í•˜ë‚˜ì˜ ì•½ìˆ˜ë¥¼ sqrt(n) ì´í•˜ì—ì„œ ê°€ì§„ë‹¤).
#
# âœ… ì •ë‹µ ì½”ë“œ(ë‚˜ì˜ í’€ì´; ì ˆëŒ€ ìˆ˜ì • ê¸ˆì§€)

class Solution:
    def countPrimeSetBits(self, left: int, right: int) -> int:
        count = 0
        
        for i in range(left, right + 1):
            setBits = bin(i).count('1')
            if self.isPrime(setBits):
                count += 1
        
        return count
    
    def isPrime(self, n: int) -> bool:
        if n <= 1:
            return False
        for i in range(2, int(n ** 0.5) + 1):
            if n % i == 0:
                return False
        return True

# -----------------------------------------------------
# ğŸ” ì²« ì‹œë„ ê²°ê³¼:
#   - ì •ë‹µ(ì˜ë„í•œ í‘œì¤€ í’€ì´ë¡œ í†µê³¼ ê°€ëŠ¥í•œ í˜•íƒœ).
#
# ğŸ”§ ì˜¤ë‹µ ì´ìœ  ë° ì‚¬ìš©í•œ ì•Œê³ ë¦¬ì¦˜ ê°œë…:
#   - ì˜¤ë‹µ ê°€ëŠ¥ í¬ì¸íŠ¸(ì°¸ê³ ):
#     - isPrimeì—ì„œ n <= 1 ì²˜ë¦¬ ëˆ„ë½ ì‹œ 0,1ì´ ì†Œìˆ˜ë¡œ ì˜¤íŒë  ìˆ˜ ìˆìŒ.
#     - sqrt ê²½ê³„(+1) ëˆ„ë½ ì‹œ ì™„ì „ì œê³±ìˆ˜ì—ì„œ í•©ì„±ìˆ˜ë¥¼ ì†Œìˆ˜ë¡œ ì˜¤íŒí•  ìˆ˜ ìˆìŒ.
#   - ì‚¬ìš© ê°œë…:
#     - popcount ê³„ì‚°: bin(i).count('1')ë¡œ 1ì˜ ê°œìˆ˜ ì§‘ê³„
#     - ì†Œìˆ˜ íŒì •: sqrt(n)ê¹Œì§€ì˜ ë‚˜ëˆ—ì…ˆ ê²€ì‚¬
#
# ğŸ“š ì‹œê°„Â·ê³µê°„ ë³µì¡ë„:
#   - ì‹œê°„: O((right-left+1) * (B + sqrt(B)))
#     - BëŠ” popcount ê³„ì‚°ì— ê´€ë ¨ëœ ë¹„íŠ¸ ê¸¸ì´(ëŒ€ëµ log2(i)) ìˆ˜ì¤€.
#     - isPrime ì…ë ¥ nì€ popcountì´ë¯€ë¡œ ìµœëŒ€ ë¹„íŠ¸ìˆ˜ ë²”ìœ„ì—ì„œ ì‘ì•„ sqrt(n) ë¹„ìš©ë„ ì‘ë‹¤.
#   - ê³µê°„: O(1) (ì¶”ê°€ ìë£Œêµ¬ì¡° ì—†ìŒ; bin ë¬¸ìì—´ ìƒì„±ì€ êµ¬í˜„ ì„¸ë¶€ ë¹„ìš©ì´ì§€ë§Œ ì•Œê³ ë¦¬ì¦˜ì  ë³´ì¡°ê³µê°„ì€ ìƒìˆ˜ë¡œ ë³¸ë‹¤)
#
# -----------------------------------------------------
# (ì„ íƒ) ë‹¤ë¥¸ íš¨ìœ¨ì  í’€ì´ ë˜ëŠ” ì•Œê³ ë¦¬ì¦˜ ì œì•ˆ:
#   - popcount ìµœëŒ€ê°’ì´ ì‘ìœ¼ë¯€ë¡œ(ì¼ë°˜ì ìœ¼ë¡œ 32ë¹„íŠ¸ë©´ ìµœëŒ€ 32) ì†Œìˆ˜ ì§‘í•©ì„ ë¯¸ë¦¬ ì¤€ë¹„(ì˜ˆ: set)í•˜ê³  í¬í•¨ ì—¬ë¶€ë§Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
#   - popcountëŠ” ë‚´ì¥ ë¹„íŠ¸ ì¹´ìš´íŠ¸(ì–¸ì–´ ì§€ì› ì‹œ)ë¥¼ ì“°ë©´ ë¬¸ìì—´ ë³€í™˜ ì—†ì´ ë” ë¹ ë¥¼ ìˆ˜ ìˆë‹¤(ê°œë…ë§Œ).
