# 0166_fraction_to_recurring_decimal.py
# -----------------------------------------------------
# âœ… ì œëª©: Fraction to Recurring Decimal
# âœ… ë¬¸ì œ ì„¤ëª…(ìš”ì•½):
# - ì •ìˆ˜ numerator, denominatorê°€ ì£¼ì–´ì¡Œì„ ë•Œ ë‚˜ëˆ—ì…ˆ ê²°ê³¼ë¥¼ ë¬¸ìžì—´ë¡œ ë°˜í™˜.
# - ìœ í•œ ì†Œìˆ˜ëŠ” ê·¸ëŒ€ë¡œ ì¶œë ¥, ìˆœí™˜ ì†Œìˆ˜ëŠ” ë°˜ë³µë˜ëŠ” ë¶€ë¶„ì„ ê´„í˜¸ë¡œ ê°ì‹¸ì•¼ í•¨.
# - ì˜ˆ: 1/2 â†’ "0.5", 2/1 â†’ "2", 2/3 â†’ "0.(6)".
#
# âœ… ìž…ë ¥ í˜•ì‹(ìš”ì§€):
# - numerator, denominator: int (ìŒìˆ˜ í¬í•¨ ê°€ëŠ¥)
#
# âœ… ê·œì¹™ ìš”ì•½:
# 1) ê²°ê³¼ ë¶€í˜¸ëŠ” ë‘ ìˆ˜ì˜ ê³±ì´ ìŒìˆ˜ì¼ ë•Œë§Œ "-" ë¶™ìž„.
# 2) ì •ìˆ˜ë¶€: ëª«ì„ ë¨¼ì € ê³„ì‚°.
# 3) ë‚˜ë¨¸ì§€ê°€ 0ì´ë©´ ì •ìˆ˜ë¶€ë§Œ ë°˜í™˜.
# 4) ë‚˜ë¨¸ì§€ê°€ ìžˆìœ¼ë©´ ì†Œìˆ˜ë¶€ë¥¼ ìžë¦¬ìˆ˜ë³„ë¡œ ê³„ì‚°:
#    - ë‚˜ë¨¸ì§€ë¥¼ 10ë°° í•´ ë‚˜ëˆ„ë©´ì„œ ê° ìžë¦¬ ì¶”ê°€
#    - ê°™ì€ ë‚˜ë¨¸ì§€ê°€ ë‹¤ì‹œ ë‚˜ì˜¤ë©´ ê·¸ ì‹œì ë¶€í„° ë°˜ë³µ â†’ ê´„í˜¸ ì²˜ë¦¬
#
# âœ… ìž…ì¶œë ¥ ì˜ˆì‹œ(1ê°œ):
# - numerator = 4, denominator = 333 â†’ "0.(012)"
#
# âœ… ì •ë‹µ ì½”ë“œ(ë‚˜ì˜ í’€ì´; í•œ ì¤„ë§ˆë‹¤ ì£¼ì„):
class Solution:
    def fractionToDecimal(self, numerator: int, denominator: int) -> str:
        if numerator * denominator < 0:           # ë¶€í˜¸ ê²°ì •
            sign = "-"
        else:
            sign = ""

        num, denom = abs(numerator), abs(denominator)  # ì ˆëŒ“ê°’ìœ¼ë¡œ ê³„ì‚°
        q, r = divmod(num, denom)                      # ì •ìˆ˜ë¶€ ëª«ê³¼ ë‚˜ë¨¸ì§€

        if r == 0:                                     # ë‚˜ë¨¸ì§€ê°€ ì—†ìœ¼ë©´ ì •ìˆ˜ ë°˜í™˜
            return sign + str(q)

        seen = {}                                      # ë‚˜ë¨¸ì§€ â†’ ì†Œìˆ˜ë¶€ ì¸ë±ìŠ¤ ê¸°ë¡
        frac = ""                                      # ì†Œìˆ˜ë¶€ ëˆ„ì  ë¬¸ìžì—´
        while r != 0:
            if r in seen:                              # ë°˜ë³µëœ ë‚˜ë¨¸ì§€ ë°œê²¬ â†’ ìˆœí™˜ ì‹œìž‘
                idx = seen[r]
                frac = frac[:idx] + "(" + frac[idx:] + ")"
                break
            seen[r] = len(frac)                        # í˜„ìž¬ ë‚˜ë¨¸ì§€ ìœ„ì¹˜ ì €ìž¥
            r *= 10
            digit, r = divmod(r, denom)                # ë‹¤ìŒ ìžë¦¬ ê³„ì‚°
            frac += str(digit)

        return sign + str(q) + "." + frac              # ìµœì¢… ë¬¸ìžì—´ ë°˜í™˜

# -----------------------------------------------------
# ðŸ” ì²« ì‹œë„ ê²°ê³¼:
# - ìˆœí™˜ ê°ì§€ìš© í•´ì‹œë§µì„ ì˜¬ë°”ë¥´ê²Œ í™œìš©í•˜ì—¬ ì •ë‹µ ë„ì¶œ.
#
# ðŸ”§ ì˜¤ë‹µ ë° ì‹¤ìˆ˜(ë¬´ì—‡ì„ í‹€ë ¸ê³  ì–´ë–»ê²Œ ê³ ì³¤ëŠ”ì§€):
# - ì´ˆê¸° êµ¬í˜„ì—ì„œëŠ” ë‚˜ë¨¸ì§€ë¥¼ ìž˜ëª» ì—…ë°ì´íŠ¸(r *= denom)í•˜ëŠ” ì˜¤ë¥˜ â†’ divmod ì‚¬ìš©ìœ¼ë¡œ ìˆ˜ì •.
# - ë¶€í˜¸ ì²˜ë¦¬ì—ì„œ "+"ë¥¼ ë¶™ì´ëŠ” ì‹¤ìˆ˜ â†’ ìŒìˆ˜ì¼ ë•Œë§Œ "-"ë¡œ ê³ ì •.
#
# ðŸ“š ì‚¬ìš©ëœ/í•„ìˆ˜ ê°œë…(ìµœì†Œ):
# - ë‚˜ëˆ—ì…ˆ ë‚˜ë¨¸ì§€ ì¶”ì 
# - í•´ì‹œë§µ(ë‚˜ë¨¸ì§€ â†’ ìœ„ì¹˜)ìœ¼ë¡œ ìˆœí™˜ ì‹œìž‘ì  ê¸°ë¡
# - ë¬¸ìžì—´ ì²˜ë¦¬ë¡œ ì†Œìˆ˜ë¶€ êµ¬ì„±
# - ì‹œê°„ë³µìž¡ë„: O(L), Lì€ ìˆœí™˜ ì£¼ê¸° ê¸¸ì´(â‰¤ denominator)
