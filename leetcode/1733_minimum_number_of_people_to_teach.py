# 1733_minimum_number_of_people_to_teach.py
# -----------------------------------------------------
# âœ… ì œëª©: Minimum Number of People to Teach
# âœ… ë¬¸ì œ ì„¤ëª…(ìš”ì•½):
# - ì‚¬ìš©ì 1..nê³¼ ê°ìì˜ ì–¸ì–´ ëª©ë¡, ì¹œêµ¬ ê´€ê³„ê°€ ì£¼ì–´ì§„ë‹¤.
# - ì„œë¡œ ëŒ€í™” ë¶ˆê°€í•œ ì¹œêµ¬ ìŒì´ ìƒê¸°ì§€ ì•Šë„ë¡ "í•˜ë‚˜ì˜ ì–¸ì–´ L"ë§Œ ê³¨ë¼ ìµœì†Œ ëª‡ ëª…ì—ê²Œ ê°€ë¥´ì¹ ì§€ êµ¬í•œë‹¤.
#
# âœ… ì…ë ¥ í˜•ì‹(ìš”ì§€):
# - n: int (ì‚¬ëŒ ìˆ˜)
# - languages: List[List[int]]  # ië²ˆì§¸ ì‚¬ëŒì˜ ì–¸ì–´ ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸(1-indexed ì‚¬ëŒ)
# - friendships: List[List[int]] # [u, v] í˜•íƒœì˜ ì¹œêµ¬ ê´€ê³„ (1-indexed ì‚¬ëŒ)
#
# âœ… ê·œì¹™ ìš”ì•½:
# 1) ëŒ€í™” ê°€ëŠ¥: ë‘ ì‚¬ëŒì˜ ì–¸ì–´ êµì§‘í•©ì´ ë¹„ì–´ìˆì§€ ì•ŠìŒ.
# 2) ëŒ€í™” ë¶ˆê°€ ìŒì— ë“±ì¥í•˜ëŠ” ì‚¬ëŒë“¤ë§Œ êµìœ¡ í›„ë³´(candidates).
# 3) ì–¸ì–´ Lì„ ì„ íƒí–ˆì„ ë•Œ, candidates ì¤‘ Lì„ ëª¨ë¥´ëŠ” ì‚¬ëŒ ìˆ˜ë¥¼ ì„¸ê³  ê·¸ ìµœì†Œê°’ì„ ì •ë‹µìœ¼ë¡œ.
#
# âœ… ì…ì¶œë ¥ ì˜ˆì‹œ(1ê°œ):
# - n=3, languages=[[2],[1,3],[1,2]], friendships=[[1,2],[1,3]]
#   â†’ ëŒ€í™” ë¶ˆê°€ ìŒ: (1,2)ë§Œ í•´ë‹¹, í›„ë³´ {1,2}
#   â†’ L=1: {1,2 ì¤‘ 1 ëª¨ë¥´ëŠ” ì‚¬ëŒ}=1, L=2: 0, L=3: 1 â†’ ìµœì†Œ 0
#
# âœ… ì •ë‹µ ì½”ë“œ(ë„ˆì˜ í’€ì´; í•œ ì¤„ë§ˆë‹¤ ì£¼ì„):
class Solution:
    def minimumTeachings(self, n: int, languages: List[List[int]], friendships: List[List[int]]) -> int:
        languages = [set(lang) for lang in languages]      # ê° ì‚¬ëŒì˜ ì–¸ì–´ë¥¼ setìœ¼ë¡œ(êµì§‘í•© O(1) ì²´í¬)
        candidates = set()                                  # ëŒ€í™” ë¶ˆê°€ ìŒì— ë“±ì¥í•œ ì‚¬ëŒë“¤

        for u, v in friendships:
            lang_u, lang_v = languages[u-1], languages[v-1]
            if not (lang_u & lang_v):                       # ê³µí†µ ì–¸ì–´ ì—†ìœ¼ë©´
                candidates.add(u); candidates.add(v)        # ë‘ ì‚¬ëŒì„ í›„ë³´ì— ì¶”ê°€
        
        if not candidates:                                  # ëª¨ë‘ ì´ë¯¸ ëŒ€í™” ê°€ëŠ¥í•˜ë©´ 0
            return 0
        
        max_lang = max(x for lang in languages for x in lang)  # ë“±ì¥ ì–¸ì–´ì˜ ìµœëŒ€ ë²ˆí˜¸
        ans = 500                                            # ì¶©ë¶„íˆ í° ì´ˆê¸°ê°’(ë˜ëŠ” float('inf'))
        for L in range(1, max_lang+1):                       # ê° ì–¸ì–´ Lì— ëŒ€í•´
            need = sum(1 for u in candidates if L not in languages[u-1])  # Lì„ ëª¨ë¥´ëŠ” í›„ë³´ ìˆ˜
            ans = min(ans, need)                             # ìµœì†Œê°’ ê°±ì‹ 

        return ans                                           # ìµœì†Œ êµìœ¡ ì¸ì› ìˆ˜ ë°˜í™˜

# -----------------------------------------------------
# ğŸ” ì²« ì‹œë„ ê²°ê³¼:
# - ëŒ€í™” ë¶ˆê°€ ìŒë§Œ ëŒ€ìƒìœ¼ë¡œ ì–¸ì–´ë³„ í•„ìš” ì¸ì› ìˆ˜ ê³„ì‚° â†’ ì •ë‹µ ë„ì¶œ.
#
# ğŸ”§ ì˜¤ë‹µ ë° ì‹¤ìˆ˜(ë¬´ì—‡ì„ í‹€ë ¸ê³  ì–´ë–»ê²Œ ê³ ì³¤ëŠ”ì§€):
# - (ì´ì „) ëŒ€í™” ë¶ˆê°€ "ìŒì˜ ê°œìˆ˜"ë¥¼ ì„¸ì—ˆìŒ â†’ ì‚¬ëŒ ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ë°”ê¿ˆ.
# - (ì£¼ì˜) ì–¸ì–´ ë²”ìœ„ë¥¼ 1..nì´ ì•„ë‹ˆë¼ ì‹¤ì œ ë“±ì¥í•œ ì–¸ì–´ì˜ ìµœëŒ€ì¹˜ë¡œ ìˆœíšŒ.
#
# ğŸ“š ì‚¬ìš©ëœ/í•„ìˆ˜ ê°œë…(ìµœì†Œ):
# - ì§‘í•© êµì§‘í•©ìœ¼ë¡œ ëŒ€í™” ê°€ëŠ¥ íŒì •
# - í›„ë³´ ì¶•ì†Œ(candidates) í›„ ì–¸ì–´ë³„ í•„ìš” ì¸ì› ê³„ì‚°
# - ì‹œê°„ë³µì¡ë„: O(|friendships|Â·avg_lang + LÂ·|candidates|)
