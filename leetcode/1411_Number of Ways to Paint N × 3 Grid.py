# 1411_Number of Ways to Paint N × 3 Grid.py
# -----------------------------------------------------
# ✅ 제목: LeetCode 1411. Number of Ways to Paint N × 3 Grid
# 🏷️ 유형: DP / 상태 전이
#
# ✅ 문제 설명(요약):
#   - N × 3 격자를 3가지 색으로 칠한다.
#   - 상하좌우로 인접한 칸은 같은 색을 가질 수 없다.
#   - 가능한 전체 경우의 수를 구한다.
#
# ✅ 입력 형식(요지):
#   - n: 행의 개수 (정수)
#
# ✅ 규칙 요약:
#   - 각 행은 3칸으로 고정되어 있다.
#   - 인접 조건은 행 내부(좌우)와 행 사이(상하) 모두 적용된다.
#   - 결과는 10^9 + 7 로 나눈 나머지를 반환한다.
#
# 🧠 핵심 불변식(Invariant):
#   - a: 현재 행이 ABA 형태(양끝 동일, 가운데 다름)인 경우의 수
#   - b: 현재 행이 ABC 형태(모두 다른 색)인 경우의 수
#   - 각 행 전이 시, a와 b는 고정된 전이 공식으로만 갱신된다.
#
# ✅ 정답 코드(나의 풀이; 절대 수정 금지)

class Solution:                                         # LeetCode 제출을 위한 Solution 클래스 정의
    def numOfWays(self, n: int) -> int:                  # N × 3 격자를 칠하는 전체 경우의 수를 계산하는 함수
        a, b = 6, 6                                      # 첫 행 기준: ABA 패턴 6개, ABC 패턴 6개로 초기화
        MOD = 10**9 + 7                                  # 문제에서 요구하는 모듈러 값 설정

        for _ in range(1, n):                            # 두 번째 행부터 n번째 행까지 순차적으로 전이
            a, b = (2*a + 2*b) % MOD, (2*a + 3*b) % MOD  # 이전 행의 상태(a, b)를 기반으로 새로운 상태 계산

        return (a + b) % MOD                             # 마지막 행에서 가능한 모든 경우(a + b)를 반환

# -----------------------------------------------------
# 🔍 첫 시도 결과:
#   - 첫 제출에서 바로 정답 처리됨 (Accepted).
#
# 🔧 오답 이유 및 사용한 알고리즘 개념:
#   - 오답 없음.
#   - 사용 개념: DP 상태 압축, 행 단위 상태 전이.
#
# 📚 시간·공간 복잡도:
#   - 시간: O(n)  (행 수만큼 반복)
#   - 공간: O(1)  (상수 개 상태만 유지)
#
# -----------------------------------------------------
# (선택) 다른 효율적 풀이 또는 알고리즘 제안:
#   - 3칸의 색 조합을 비트마스크로 표현해 상태 그래프를 구성하는 방식도 가능하나,
#     상태 수가 작아 현재의 수식 기반 DP가 가장 간결하다.
