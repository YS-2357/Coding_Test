# -----------------------------------------------------
# âœ… ë¬¸ì œ ì„¤ëª…:
# - NÃ—M í¬ê¸°ì˜ ë°°ì—´ì´ ì£¼ì–´ì§€ê³ , ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ Rë²ˆ íšŒì „í•´ì•¼ í•œë‹¤.
# - ë°°ì—´ì˜ ê°€ì¥ ë°”ê¹¥ìª½ í…Œë‘ë¦¬ë¶€í„° ì•ˆìª½ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ "ë ˆì´ì–´(ê»ì§ˆ)"ë¥¼ ë‚˜ëˆ ì„œ íšŒì „í•œë‹¤.
# - Rê°œì˜ íšŒì „ì„ ìˆ˜í–‰í•œ í›„, ìµœì¢… ë°°ì—´ì„ ì¶œë ¥í•œë‹¤.
#
# âœ… ì…ë ¥ í˜•ì‹:
# - ì²« ë²ˆì§¸ ì¤„: `N M R` (2 â‰¤ N, M â‰¤ 300, 1 â‰¤ R â‰¤ 10^9)
# - ì´í›„ Nê°œì˜ ì¤„: ë°°ì—´ ì›ì†Œ (1 â‰¤ ì›ì†Œ â‰¤ 1000)
#
# âœ… ì¶œë ¥ í˜•ì‹:
# - Rë²ˆ íšŒì „í•œ í›„ì˜ ë°°ì—´ì„ ì¶œë ¥
#
# âœ… ì…ì¶œë ¥ ì˜ˆì œ:
# ğŸ”¹ ì˜ˆì œ ì…ë ¥ 1:
#   4 4 1
#   1 2 3 4
#   5 6 7 8
#   9 10 11 12
#   13 14 15 16
# ğŸ”¹ ì˜ˆì œ ì¶œë ¥ 1:
#   2 3 4 8
#   1 7 11 12
#   5 6 10 16
#   9 13 14 15
# -----------------------------------------------------

import sys

# âœ… ì…ë ¥ ì²˜ë¦¬ (ë¹ ë¥¸ ì…ë ¥ì„ ìœ„í•´ sys.stdin.readline ì‚¬ìš©)
N, M, R = map(int, sys.stdin.readline().split())  # í–‰(N), ì—´(M), íšŒì „ íšŸìˆ˜(R)
board = [list(map(int, sys.stdin.readline().split())) for _ in range(N)]  # 2ì°¨ì› ë°°ì—´ ì…ë ¥

# âœ… ë°°ì—´ì„ ë ˆì´ì–´(ê»ì§ˆ) ë‹¨ìœ„ë¡œ íšŒì „í•˜ëŠ” í•¨ìˆ˜
def rotate_layers(board, N, M, R):
    num_layers = min(N, M) // 2  # ì´ ë ˆì´ì–´ ê°œìˆ˜ (ê°€ì¥ ë°”ê¹¥ìª½ë¶€í„° ì•ˆìª½ìœ¼ë¡œ)

    for layer in range(num_layers):
        # âœ… í˜„ì¬ ë ˆì´ì–´ì˜ ê²½ê³„ ì¢Œí‘œ ì„¤ì •
        sx, sy = layer, layer  # ì¢Œìƒë‹¨ ì¢Œí‘œ
        ex, ey = N - layer - 1, M - layer - 1  # ìš°í•˜ë‹¨ ì¢Œí‘œ

        # âœ… í˜„ì¬ ë ˆì´ì–´ì˜ ì£¼ê¸° ê³„ì‚° (í•œ ë°”í€´ ë„ëŠ” ê¸¸ì´)
        cycle_length = 2 * ((ex - sx + 1) + (ey - sy + 1) - 2)

        # âœ… ë¶ˆí•„ìš”í•œ íšŒì „ì„ ì¤„ì´ê¸° ìœ„í•´ Rì„ ì£¼ê¸°ë¡œ ë‚˜ëˆ”
        rotate_count = R % cycle_length  

        # âœ… íšŒì „í•  í•„ìš”ê°€ ì—†ìœ¼ë©´ ìŠ¤í‚µ
        if rotate_count == 0:
            continue

        # âœ… 1. ë ˆì´ì–´ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
        elements = []
        
        # ğŸ”¹ â†’ (ì™¼ìª½ â†’ ì˜¤ë¥¸ìª½) (ë§¨ ìœ—ì¤„)
        for j in range(sy, ey + 1):
            elements.append(board[sx][j])  # (sx, j)

        # ğŸ”¹ â†“ (ìœ„ìª½ â†’ ì•„ë˜ìª½) (ë§¨ ì˜¤ë¥¸ìª½ ì¤„)
        for i in range(sx + 1, ex + 1):
            elements.append(board[i][ey])  # (i, ey)

        # ğŸ”¹ â† (ì˜¤ë¥¸ìª½ â†’ ì™¼ìª½) (ë§¨ ì•„ë˜ì¤„)
        if sx != ex:  
            for j in range(ey - 1, sy - 1, -1):
                elements.append(board[ex][j])  # (ex, j)

        # ğŸ”¹ â†‘ (ì•„ë˜ìª½ â†’ ìœ„ìª½) (ë§¨ ì™¼ìª½ ì¤„)
        if sy != ey:
            for i in range(ex - 1, sx, -1):
                elements.append(board[i][sy])  # (i, sy)

        # âœ… 2. ë¦¬ìŠ¤íŠ¸ë¥¼ R % ì£¼ê¸° ì¹¸ íšŒì „
        rotated = elements[rotate_count:] + elements[:rotate_count]

        # âœ… 3. íšŒì „ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì›ë˜ ë°°ì—´ì— ì±„ì›Œë„£ê¸°
        idx = 0  # rotated ë¦¬ìŠ¤íŠ¸ì˜ ì¸ë±ìŠ¤
        
        # ğŸ”¹ â†’ (ì™¼ìª½ â†’ ì˜¤ë¥¸ìª½) (ë§¨ ìœ—ì¤„)
        for j in range(sy, ey + 1):
            board[sx][j] = rotated[idx]  # (sx, j)
            idx += 1

        # ğŸ”¹ â†“ (ìœ„ìª½ â†’ ì•„ë˜ìª½) (ë§¨ ì˜¤ë¥¸ìª½ ì¤„)
        for i in range(sx + 1, ex + 1):
            board[i][ey] = rotated[idx]  # (i, ey)
            idx += 1

        # ğŸ”¹ â† (ì˜¤ë¥¸ìª½ â†’ ì™¼ìª½) (ë§¨ ì•„ë˜ì¤„)
        if sx != ex:  
            for j in range(ey - 1, sy - 1, -1):
                board[ex][j] = rotated[idx]  # (ex, j)
                idx += 1

        # ğŸ”¹ â†‘ (ì•„ë˜ìª½ â†’ ìœ„ìª½) (ë§¨ ì™¼ìª½ ì¤„)
        if sy != ey:
            for i in range(ex - 1, sx, -1):
                board[i][sy] = rotated[idx]  # (i, sy)
                idx += 1

# âœ… ë°°ì—´ íšŒì „ ìˆ˜í–‰
rotate_layers(board, N, M, R)

# âœ… ìµœì¢… ê²°ê³¼ ì¶œë ¥
for row in board:
    print(*row)

# -----------------------------------------------------
# 16926_ë°°ì—´_ëŒë¦¬ê¸°_1.pyê³¼ ì°¨ì´ì ì€ Rì„ ì£¼ê¸°ë¡œ ë‚˜ëˆˆ ê²ƒ ë¿ì´ë‹¤.
